# 表现与数据分离

## 相关文章链接
1. [我不理解表现与数据分离][article1]
2. [一次面试回顾——探讨表现与数据分离][article2]
3. [一个示例让你明白界面与数据分离][article3]
4. [为什么MVC不是一种设计模式？][article4]
5. [Model–view–controller][article5]

## 描述
前些时候，收集面试题时看到一遍关于“表现与数据分离”的文章。开始，我还以为是结构（html）、表现（css）和行为（javascript）这三者分离。但在阅读了一些相关的文章后，意识到了其中的要点是javascript的设计模式。

### 引子
将如下的需求以“表现与数据分离”的思想实现
>他有一个国家列表，现在要将国家列表放到A中，然后B可以由A选择，也可以有总列表选择
>但是B中添加后，若是A中没有要动态为A增加这项。
![](http://images.cnitblog.com/blog/294743/201307/02180902-99fc6990851f488585bf52c2f78a975f.png)

### 搜寻
1和2两篇文章是原面试题分享者<u>叶小钗</u>相隔半年时间写出的理解，文章洋洋洒洒写了很多，但是没有给“表现与数据分离”具体定义。

评论的<u>麦舒</u>认为他这不是真正意义上的分离，于是就找到了文章3。开篇就直接陈述了他对“表现与数据分离”的定义：
> 1. 界面与数据的分离，必须体现在代码上，界面的代码归界面的代码，数据的代码归数据的代码，两者必须泾渭分明。
> 2. 当界面需求发生改变，只需要改写界面的代码，并且所改写的代码不能影响到数据访问的代码。

<u>麦舒</u>的文章鲜明地表述了“表现与数据分离”的关键在于数据逻辑暴露一个接口给表现逻辑，以事件驱动的方式实现数据与表现的粘合。这样一来，表现逻辑的变更就不会需要随之更改数据逻辑。

这个问题的关键就在于 **解耦**，高程的最佳实践那章讲过“松散耦合”的概念 —— html与js分离、css与js分离、应用逻辑与事件处理分离。这里的“应用逻辑和事件处理分离”，差不多可以对应“表现与数据分离”的概念。当然，完全解耦是不可能的，所以是“松散”地耦合。也就是说表现依赖数据，但数据不依赖表现。进而，使得两者分层，表现逻辑在数据逻辑之上构建，只要暴露的接口统一，就可以比较好的避免牵一发而动全身的窘境。

当然文章3下还是有很激烈的讨论，其中内容大致归纳下：

1. 用户需求和设计模式的权衡
2. 组件化常用功能
3. MVC，MVVM，模板化数据
4. 实现需求与便于维护，选择适合项目的框架
5. 多国语言的i18n实现
6. 框架的存在是为了将信息呈现从用户交互中分离出来

总的来看就是，为了提高代码复用性、便于维护和后期迭代，项目需要引入框架，而框架大多基于MVC的设计模式。可以看出来，“表现与数据分离”的概念是来自于MVC的设计模式，但是国内的这种说法又在英文网页上搜索不到。再根据文章3下面的评论，我猜想这个概念的提出可能是对MVC部分思想的理解偏差。

通过文章1总推荐的“大神”的博客，在其中搜索“分离”关键字，找到一篇关于MVC的文章4。文章清晰阐述了MVC的由来和关注点分离的理念，并且明确表示具体实现中不应该拘泥于MVC的结构，也就是不要为了MVC而生硬地抽象出全套MVC结构。

再看维基百科上关于MVC的解释，可以清晰的了解到：MVC的设计初衷是将内部信息呈现从用户交互中分离出来。通过将主要组件解耦，从而提高代码复用性，并且允许并行开发。

### 收获
目前来看，“表现与数据分离”的概念来自于MVC的关注点分离。但两者又不完全一致，相通的思想是：解耦、职责分离（关注点分离）、组件化。解耦便于维护与迭代，职责分离允许并行开发，组件化提高了代码复用性。

## 后续关注点
1. 框架学习
2. 加深MVC/MVVM的了解
3. 多以关注点分离的设计模式来实践编程
4. i18n的实现

[article1]: http://www.cnblogs.com/yexiaochai/p/3167465.html
[article2]: http://www.cnblogs.com/yexiaochai/p/3523219.html
[article3]: http://www.cnblogs.com/ansiboy/p/3528010.html
[article4]: http://damoqiongqiu.iteye.com/blog/1949256
[article5]: https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller
